@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
	ViewData["Title"] = "StudentDto";
}

@model DMBD.Kernel.DTOs.StudentDto


@section HeaderContent {
	<p style="font-size: large;">Yönetim Paneli Ekranı</p>
}

<!--İÇERİK BAŞLANGICI-->
<div class="container-application">

	@*<div class="container-split">*@
	<div class="row">
		<div class="col-sm-6">
			<h5 class="text-mainpanel">Öğrenci Başvuruları</h5>
			<div class="student-app">
				<form asp-action="List" method="get" asp-controller="StudentDto">
					<table class="table-student">
						<thead>
							<tr>
								<th scope="col">Adı</th>
								<th scope="col">Soyadı</th>
								<th scope="col">E-Mail</th>
								<th scope="col">Telefon</th>
								<th scope="col">Araçlar</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var student in ViewBag.Applications)
							{
								<tr>
									<td>@student.Name</td>
									<td>@student.Surname</td>
									<td>@student.MailAddress</td>
									<td>@student.PhoneNumber</td>
									<td>
										<button type="button" onclick="detail(@student.Id)" class="btn btn-primary">Detay</button>
									</td>
								</tr>
							}
						</tbody>

					</table>
				</form>
			</div>
		</div>
		<!--col-->
		<div class="col-sm-5">
			<div class="detail">
				<h5 class="text-mainpanel">Öğrenci Detay Ekranı</h5>
				<table class="table-student">
					<tr>
						<th scope="col">Adı</th>
						<td id="Name"></td>
					</tr>
					<tr>
						<th scope="col">Soyadı</th>
						<td id="Surname"></td>
					</tr>
					<tr>
						<th scope="col">E-Mail</th>
						<td id="MailAddress"></td>
					</tr>
					<tr>
						<th scope="col">Kayıtlanma Şekli</th>
						<td id="RegisterType"></td>
					</tr>
					<tr>
						<th scope="col">Önceden Okuduğu Üniversite</th>
						<td id="PreSchoolName"></td>
					</tr>
					<tr>
						<th scope="col">Fakülte</th>
						<td id="PreFacultyName"></td>
					</tr>
					<tr>
						<th scope="col">Bölüm</th>
						<td id="PreDepartmentName"></td>
					</tr>
				</table>
				<br>
				<h5 class="text-mainpanel">Saydırmak İstenen Dersler</h5>
				<table class="table-student">
					<tr>
						<th scope="col">Ders Adı</th>
						<td id="ExemptSubjectName"></td>
					</tr>
					<tr>
						<th scope="col">Kredi</th>
						<td id="ExemptSubjectCredit"></td>
					</tr>

					<tr>
						<th scope="col">AKTS</th>
						<td id="ExemptSubjectAkts"></td>
					</tr>

					<tr></tr>

				</table>
			</div>
			<!--detail-->
		</div>
		<!--col-->

	</div>
	<!--row-->
	@*</div>*@
	<!--container-split-->
</div>
<!--container-application-->

<script>
	function detail(studentId) {
		// Öğrenci detaylarını getirmek için AJAX isteği yapabilirsiniz
		$.ajax({
			url: '@Url.Action("StudentApplication", "Subject")',
			type: 'GET',
			data: { id: studentId },
			success: function (data) {
				// Başarılı cevap geldiğinde yapılacak işlemler
				$('#Name').val(data.Name);
				$('#Surname').val(data.Surname);
				$('#MailAddress').val(data.MailAddress);
				$('#RegisterType').val(data.EnrollmentType);
				$('#PreSchoolName').val(data.PreSchoolName);
				$('#PreFacultyName').val(data.PreFacultyName);
				$('#PreDepartmentName').val(data.PreDepartmentName);
				$('#ExemptSubjectName').val(data.ExemptSubjectName);
				$('#ExemptSubjectCredit').val(data.ExemptSubjectCredit);
				$('#ExemptSubjectAkts').val(data.ExemptSubjectAkts);
			},
			error: function (xhr, status, error) {
				// Hata durumunda yapılacak işlemler
				console.error(error);
			}
		});
	}
</script>