﻿@using DMBD.Kernel.DTOs
@model DMBD.Kernel.DTOs.SubjectDto

@{
	ViewData["Title"] = "SubjectDto";//degisti
}

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

@section HeaderContent {
	<p style="font-size: large;">Ders Muafiyet Başvuru Ekranı</p>
}

<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Popup Example</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
</head>
<body>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</body>
</html>


<!--sayfa düzeni için container-->
<div class="container-layout d-flex justify-content-center align-items-center">
	@*<div class="row"><!--divleri 2ye bölmek için-->
		<div class="col"><!--divleri 2ye bölmek için-->*@
	@*<div class="row justify-content-center">
		<div class="col-6">*@
			<div class="box-subject" style="background-color: #f0f9ff; border: 2px solid #bad1da; border-radius: 10px;">

				<h5>Ders Bilgileri</h5>
				<form asp-action="Save" method="post" asp-controller="Subject" class="row g-1">
					<div class="col-md-6">
						<label asp-for="SubjectName" class="form-label">Daha Önce Alınan Ders Adı</label>
						<span asp-validation-for="SubjectName" class="text-danger"></span>
						<br>
						<select asp-for="SubjectName" class="form-control" id="SubjectName" required style="border: 2px solid #bad1da; border-radius: 10px;">
							<option selected value="">Seçiniz</option>
							@foreach (var subject in ViewBag.Subjects)
							{
								<option value="@subject.SubjectName" data-credit="@subject.Credit" data-akts="@subject.Akts">@subject.SubjectName</option>
							}
						</select>
					</div>

					<div class="col-md-6">
						<label asp-for="SubjectCredit" class="form-label">Kredisi</label>
						<input asp-for="SubjectCredit" class="form-control" id="SubjectCredit" disabled readonly />
						<span asp-validation-for="SubjectCredit" class="text-danger"></span>

						<br />

						<label asp-for="SubjectAkts" class="form-label">AKTS Bilgisi</label>
						<input asp-for="SubjectAkts" class="form-control" id="SubjectAkts" disabled readonly />
						<span asp-validation-for="SubjectAkts" class="text-danger"></span>
					</div>

					<hr />
					<div class="col-md-6">

						<label asp-for="ExemptSubjectName" class="form-label">Muaf Olunması İstenen Ders Adı</label>
						<br>
						<select asp-for="ExemptSubjectName" class="form-control" id="ExemptSubjectName" required style="border: 2px solid #bad1da; border-radius: 10px;">
							<option selected value="">Seçiniz</option>
							@foreach (var subject in ViewBag.Subjects)
							{
								<option value="@subject.SubjectName" data-credit="@subject.Credit" data-akts="@subject.Akts">@subject.SubjectName</option>
							}
						</select>
					</div>

					<div class="col-md-6">
						<label asp-for="ExemptSubjectCredit" class="form-label">Kredi</label>
						<input asp-for="ExemptSubjectCredit" class="form-control" id="ExemptSubjectCredit" disabled readonly />
						<span asp-validation-for="ExemptSubjectCredit" class="text-danger"></span>
						<br />
						<label asp-for="ExemptSubjectAkts" class="form-label">AKTS</label>
						<input asp-for="ExemptSubjectAkts" class="form-control" id="ExemptSubjectAkts" disabled readonly />
						<span asp-validation-for="ExemptSubjectAkts" class="text-danger"></span>
					</div>

					<div class="d-grid gap-2 d-md-flex justify-content-md-end">
						<input class="btn" type="submit" value="Dersi Ekle" style="background-color: #456097; color: white; border: 2px solid #bad1da; border-radius: 10px;">
					</div>

				</form>




			</div><!--box-->
		@*</div><!--col-6-->
	</div><!--row justify-content-center-->*@
	@*</div><!--col: divleri 2ye bölmek için-->
	</div><!--row: divleri 2ye bölmek için-->*@
@*</div><!--container-fluid d-flex justify-content-center align-items-center-->*@
<!--KAYDEDILEN DERS BILGILERI BAŞLANGI-->

@*<div class="container-fluid d-flex justify-content-center align-items-center">*@
	@*<div class="row"><!--divleri 2ye bölmek için-->
		<div class="col"><!--divleri 2ye bölmek için-->*@
	@*<div class="row-subject justify-content-center">*@
		@*<div class="col-6">*@
			<div class="box-subject" style="background-color: #d1e4f2; border: 2px solid #bad1da; border-radius: 10px;">
				@*<div class="specific-container d-flex justify-content-center align-items-center">*@

				<h5>Kaydedilen Ders Bilgileri</h5>
				<div class="specific-container d-flex justify-content-center ">


					<table class="table-subject  mx-auto" id="registeredCourse">
						<thead>
							<tr>
								<th scope="col">TCNO</th>
								<th scope="col">Daha  Önce Alınan Ders</th>
								<th scope="col" style="width: 5ch">KREDİ</th>
								<th scope="col" style="width: 5ch">AKTS</th>
								<th scope="col">ETÜ KARŞILIĞI DERS</th>
								<th scope="col">Ders Kodu</th>
								<th scope="col" style="width: 5ch">KREDİ</th>
								<th scope="col" style="width: 5ch">AKTS</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var course in ViewBag.SubjectList)
							{
								<tr>
									<td>@course.TcNo</td>
									<td>@course.SubjectName</td>
									<td>@course.SubjectCredit</td>
									<td>@course.SubjectAkts</td>
									<td>@course.ExemptSubjectName</td>
									<th scope="row">@course.SubjectId</th><!--ders kodu Exempt olacak-->
									<td>@course.ExemptSubjectCredit</td>
									<td>@course.ExemptSubjectAkts</td>
								</tr>
							}
						</tbody>
					</table>





				</div>
			</div><!--box-->
		@*</div><!--col-6-->*@
	@*</div><!--row justify-content-center-->*@
	@*</div><!--col: divleri 2ye bölmek için-->
	</div><!--row: divleri 2ye bölmek için-->*@
</div><!--container-fluid d-flex justify-content-center align-items-center-->

<div class="d-grid gap-2 d-md-flex justify-content-md-end">
	<button class="btn btn-primary me-md-2" onclick="pdf()" type="button" style="background-color: #456097; color: white; border: 2px solid #bad1da; border-radius: 10px;">Sonraki Sayfa</button>

	<script>
		function pdf() {
			window.location.href = "/Home/PdfScreen";
		}
	</script>

</div>
<!--KAYDEDILEN DERS BILGILERI BİTİŞ-->

@* SCRIPTS *@

<script>
	$(document).ready(function () {
		var message = '@TempData["SuccessMessage"]'; // TempData'dan mesajı al

		if (message) {
			$.alert({
				title: 'Kayıt Durumu!',
				content: message,
			});
		}
	});
</script>

<script>
	document.getElementById('SubjectName').addEventListener('change', function () {
		var selectedOption = this.options[this.selectedIndex];
		var credit = selectedOption.getAttribute('data-credit');
		var akts = selectedOption.getAttribute('data-akts');
		var subjectId = selectedOption.value; // Assuming SubjectId is the value of the selected option

		document.getElementById('SubjectCredit').value = credit;
		document.getElementById('SubjectAkts').value = akts;
		document.getElementById('SubjectId').value = subjectId;
	});

	document.getElementById('ExemptSubjectName').addEventListener('change', function () {
		var selectedOption = this.options[this.selectedIndex];
		var credit = selectedOption.getAttribute('data-credit');
		var akts = selectedOption.getAttribute('data-akts');
		var exemptSubjectId = selectedOption.value; // Assuming ExemptSubjectId is the value of the selected option

		document.getElementById('ExemptSubjectCredit').value = credit;
		document.getElementById('ExemptSubjectAkts').value = akts;
		document.getElementById('ExemptSubjectId').value = exemptSubjectId;
	});
</script>